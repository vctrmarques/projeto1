<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>PROCESO SELETIVO STEFANINI - DEV JAVA RECIFE</title>

  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta name="language" content="PT-BR"/>
  
  <link rel="stylesheet" type="text/css" href="stylesheet.css" media="screen" />

    <script type="text/javascript">
	function ValidaCPF(){	
		var cpf=document.getElementById("cpf").value; 
		var cpfValido = /^(([0-9]{3}.[0-9]{3}.[0-9]{3}-[0-9]{2})|([0-9]{11}))$/;	 
		if (cpfValido.test(cpf) == true)	{ 
			console.log("CPF Válido");	
			document.getElementById("msgCPF").innerHTML="CPF Válido";	
		} else	{	 
			document.getElementById("msgCPF").innerHTML="<font color='red'>CPF Inválido</font>";		
		}
		if (cpf.length != 14 || 
			cpf == "000.000.000-00" || 
			cpf == "111.111.111-11" || 
			cpf == "222.222.222-22" || 
			cpf == "333.333.333-33" || 
			cpf == "444.444.444-44" || 
			cpf == "555.555.555-55" || 
			cpf == "666.666.666-66" || 
			cpf == "777.777.777-77" || 
			cpf == "888.888.888-88" || 
			cpf == "999.999.999-99"){
			document.getElementById("msgCPF").innerHTML="<font color='red'>CPF Inválido </font>";		
		}
	}
	function fMasc(objeto,mascara) {
	  obj=objeto
	  masc=mascara
	  setTimeout("fMascEx()",1)
	}

	function fMascEx() {
	  obj.value=masc(obj.value)
	}

	function mCPF(cpf){
	 cpf=cpf.replace(/\D/g,"")
	 cpf=cpf.replace(/(\d{3})(\d)/,"$1.$2")
	 cpf=cpf.replace(/(\d{3})(\d)/,"$1.$2")
	 cpf=cpf.replace(/(\d{3})(\d{1,2})$/,"$1-$2")
	return cpf
	}
	
	function validacaoEmail(field) {
	usuario = field.value.substring(0, field.value.indexOf("@"));
	dominio = field.value.substring(field.value.indexOf("@")+ 1, field.value.length);
	 
	if ((usuario.length >=1) &&
		(dominio.length >=3) && 
		(usuario.search("@")==-1) && 
		(dominio.search("@")==-1) &&
		(usuario.search(" ")==-1) && 
		(dominio.search(" ")==-1) &&
		(dominio.search(".")!=-1) &&      
		(dominio.indexOf(".") >=1)&& 
		(dominio.lastIndexOf(".") < dominio.length - 1)) {
		document.getElementById("msgemail").innerHTML="E-mail válido";
	}
		else{
			document.getElementById("msgemail").innerHTML="<font color='red'>E-mail inválido </font>";
		}
	}
	</script>
</head>
<body>
<form id="form1" th:action="@{/user}" th:object="${userForm}" name="form1" method="post">
    <table>
		<tr>
			<div>
				Nome:
				<input type="text" id="nome" name="nome" />
			</div>
		</tr>
		<tr>
			<td>
				CPF:
				<input type="text" id="cpf" name="cpf" maxlength="14" onkeydown="javascript: fMasc( this, mCPF );" onblur="ValidaCPF()">
			</td>
			<td>
				<div id="msgCPF"></div>
			</td>
		</tr>
		<tr>
			<td>
				E-mail:
				<input type="text"  id="email" name="email" onblur="validacaoEmail(form1.email)"  maxlength="30" size='65'>
			</td>
			<td>
				<div id="msgemail"></div>
			</td>
		</tr>
		<tr>
			<td>
				Data Nascimento
				<input id="dateNascimento" name="dataNascimento" type="date" value="2020-06-04">
			</td>
		</tr>
		<tr>
			<td>
				Naturalidade
				<select id="naturalidade" name="naturalidade">
					<option value=""></option>
					<option value="scs">São Caetano do Sul</option>
					<option value="sa">Santo André</option>
					<option value="sbc">São Bernardo do Campo</option>
					<option value="sbc">Recife</option>
					<option value="sbc">Olinda</option>
					<option value="sbc">Paulista</option>
				</select>
			</td>
		</tr>
		<tr>
			<td>
				Nacionalidade
				<select id="nacionalidade" name="nacionalidade">
					<option value=""></option>
					<option value="scs">EUA</option>
					<option value="sa">Canadá</option>
					<option value="sa">México</option>
					<option value="sbc">Brasil</option>
					<option value="sbc">Chile</option>
					<option value="sbc">Uruguai</option>
					<option value="sbc">Argentina</option>
				</select>
			</td>
		</tr>
		<tr>
			<td id=foo>
				 <p>Sexo:</p>
				 <input type="radio" id="masculino" name="sexo" value="masculino" class="ignoreCss">
				 <label for="masculino">Masculino</label><br>
				 <input type="radio" id="feminio" name="sexo" value="feminino" class="ignoreCss">
				 <label for="feminino">Feminino</label><br>
				 <input type="radio" id="outro" name="sexo" value="outro" class="ignoreCss">
				 <label for="outro">Outro</label>
			</td>
		</tr>
		<tr>
			<td>
				<input type="submit" value="Enviar formulário"/>
			</td>
		</tr>
	</table>
</form>
	<Table th:if="${not #lists.isEmpty(usersList)}" border="1">
		<tr>
			<th>Nome</th>
			<th>Sexo</th>
			<th>Email</th>
			<th>Data Nascimento</th>
			<th>Naturalidade</th>
			<th>Nacionalidade</th>
			<th>Cpf</th>
			<th>x</th>
		</tr>
		<tr th:each= "user : ${usersList}">
			<td th:text=${user.name}></td>
			<td th:text=${user.sexo}></td>
			<td th:text=${user.email}></td>
			<td th:text=${user.cpf}></td>
			<td th:text=${user.dataNascimento}></td>
			<td th:text=${user.naturalidade}></td>
			<td th:text=${user.nacionalidade}></td>
			<td>
		        <form method="POST" th:action="@{user/edit(cpf=${user.cpf})}">
		            <button type="submit" name="submit" value="value" class="link-button">EDIT</button>
		        </form> | 
		        <form method="POST" th:action="@{user/delete(cpf=${user.cpf})}">
		            <button type="submit" name="submit" value="value" class="link-button">DELETE</button>
		        </form>
		    </td>
		</tr>
	</Table>
</body>
</html>